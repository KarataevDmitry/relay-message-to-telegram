# Подробная инструкция по настройке appsettings.json

## Обзор

Ваше приложение использует **WTelegramClient** для работы с Telegram API, что означает, что оно работает как обычное приложение Telegram, а не как бот. Это требует получения API ключей от Telegram для разработчиков.

## Структура appsettings.json

Ваш файл `appsettings.json` должен содержать следующие настройки:

```json
{
  "TelegramSettings": {
    "API_ID": "ваш_api_id",
    "API_HASH": "ваш_api_hash",
    "AccountPhone": "+7XXXXXXXXXX",
    "SessionPathName": "session.session",
    "LogFileName": "telegram.log"
  }
}
```

## Пошаговая инструкция получения API ключей

### Шаг 1: Регистрация на my.telegram.org

1. Откройте браузер и перейдите на сайт [https://my.telegram.org](https://my.telegram.org)
2. Войдите в свой аккаунт Telegram, используя номер телефона и код подтверждения
3. Если у вас нет аккаунта Telegram, сначала зарегистрируйтесь в приложении Telegram

### Шаг 2: Создание приложения

1. После входа в my.telegram.org нажмите на **"API development tools"**
2. Нажмите **"Create new application"**
3. Заполните форму:
   - **App title**: Название вашего приложения (например, "TelegramNotifier")
   - **Short name**: Короткое название (например, "tnotifier")
   - **Platform**: Выберите "Desktop"
   - **Description**: Описание приложения (например, "Уведомления через Telegram")
   - **URL**: Можете оставить пустым или указать URL вашего проекта
4. Нажмите **"Create application"**

### Шаг 3: Получение API ключей

После создания приложения вы получите:
- **API ID** - числовой идентификатор (например, 12345678)
- **API Hash** - строка из 32 символов (например, "abcdef1234567890abcdef1234567890")

### Шаг 4: Настройка appsettings.json

Замените значения в вашем файле `appsettings.json`:

```json
{
  "TelegramSettings": {
    "API_ID": "12345678",
    "API_HASH": "abcdef1234567890abcdef1234567890",
    "AccountPhone": "+79123456789",
    "SessionPathName": "session.session",
    "LogFileName": "telegram.log"
  }
}
```

## Описание параметров

| Параметр | Описание | Пример |
|----------|----------|---------|
| `API_ID` | ID вашего приложения из my.telegram.org | `12345678` |
| `API_HASH` | Хеш вашего приложения из my.telegram.org | `abcdef1234567890abcdef1234567890` |
| `AccountPhone` | Номер телефона аккаунта Telegram в международном формате | `+79123456789` |
| `SessionPathName` | Имя файла для сохранения сессии (создается автоматически) | `session.session` |
| `LogFileName` | Имя файла для логов | `telegram.log` |

## Важные замечания

### Безопасность
- **НЕ ДЕЛИТЕСЬ** API_ID и API_HASH с другими людьми
- **НЕ ПУБЛИКУЙТЕ** эти данные в открытом доступе
- Добавьте `appsettings.json` в `.gitignore`, если планируете использовать Git

### Первый запуск
При первом запуске приложения:
1. Вам будет отправлен код подтверждения в Telegram
2. Введите этот код в консоль
3. Если включена двухфакторная аутентификация, введите пароль
4. Сессия сохранится в файл `session.session`

### Файл сессии
- Файл `session.session` содержит данные для авторизации
- **НЕ УДАЛЯЙТЕ** этот файл, иначе придется заново проходить авторизацию
- Этот файл привязан к конкретному аккаунту и устройству

## Пример готового appsettings.json

```json
{
  "TelegramSettings": {
    "API_ID": "12345678",
    "API_HASH": "abcdef1234567890abcdef1234567890",
    "AccountPhone": "+79123456789",
    "SessionPathName": "session.session",
    "LogFileName": "telegram.log"
  }
}
```

## Проверка настройки

После настройки запустите приложение без параметров для проверки:

```bash
./TelegramNotifier.exe
```

Если настройки корректны, вы увидите инструкцию по использованию приложения.

## Устранение проблем

### Ошибка "PHONE_NUMBER_INVALID"
- Проверьте формат номера телефона (должен быть с кодом страны, например +7)
- Убедитесь, что номер зарегистрирован в Telegram

### Ошибка "API_ID_INVALID" или "API_HASH_INVALID"
- Проверьте правильность скопированных API_ID и API_HASH
- Убедитесь, что приложение создано на my.telegram.org

### Ошибка "SESSION_PASSWORD_NEEDED"
- Включена двухфакторная аутентификация
- Введите пароль от аккаунта Telegram

## Дополнительная информация

- API ключи привязаны к вашему аккаунту Telegram
- Один аккаунт может создать несколько приложений
- При удалении приложения на my.telegram.org API ключи станут недействительными
- Для продакшена рекомендуется использовать отдельный аккаунт Telegram
